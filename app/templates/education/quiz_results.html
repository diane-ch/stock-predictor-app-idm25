<!-- templates/education/quiz_results.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Results</title>
</head>
<body>
    <div style="max-width: 800px; margin: 0 auto; padding: 20px; text-align: center;">
        <h1>Quiz Results</h1>
        <h2>{{ lesson.title }} - {{ quiz.title }}</h2>
        
        <!-- Score Display -->
        <div style="background-color: {% if result.is_passed %}#d4edda{% else %}#f8d7da{% endif %}; padding: 30px; margin: 20px 0; border-radius: 10px;">
            <h2 style="color: {% if result.is_passed %}#155724{% else %}#721c24{% endif %};">
                {% if result.is_passed %}ðŸŽ‰ Congratulations!{% else %}ðŸ“š Keep Learning!{% endif %}
            </h2>
            <p><strong>Score: {{ result.score }}%</strong></p>
            <p>{{ result.correct_answers }} out of {{ result.total_questions }} correct</p>
            {% if result.is_passed %}
                <p>You passed! Great job on completing this lesson.</p>
            {% else %}
                <p>You need 100% to pass. Review the lesson and try again.</p>
            {% endif %}
        </div>
        
        <!-- Question Review -->
        <div style="text-align: left;">
            <h3>Question Review:</h3>
            {% for question in quiz.questions %}
            <div style="background-color: #f8f9fa; padding: 15px; margin: 15px 0; border-radius: 5px;">
                <h4>Question {{ loop.index }}: {{ question.text }}</h4>
                
                <p><strong>Your Answer:</strong> 
                    {% if user_answers[loop.index0] >= 0 and user_answers[loop.index0] < question.options|length %}
                        {{ question.options[user_answers[loop.index0]] }}
                        {% if user_answers[loop.index0] == question.correct_answer %}
                            <span style="color: green;">âœ“ Correct</span>
                        {% else %}
                            <span style="color: red;">âœ— Incorrect</span>
                        {% endif %}
                    {% else %}
                        <span style="color: orange;">No answer selected</span>
                    {% endif %}
                </p>
                
                <p><strong>Correct Answer:</strong> {{ question.options[question.correct_answer] }}</p>
                
                {% if question.explanation %}
                <p><strong>Explanation:</strong> {{ question.explanation }}</p>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        
        <!-- Action Buttons -->
        <div style="margin-top: 30px;">
            {% if result.is_passed %}
                <a href="{{ url_for('education.education_home') }}" 
                   style="display: inline-block; padding: 15px 30px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px; margin: 5px;">
                    Continue Learning
                </a>
            {% else %}
                <a href="{{ url_for('education.lesson_preview', module_id=module.id, lesson_id=lesson.id) }}" 
                   style="display: inline-block; padding: 15px 30px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px; margin: 5px;">
                    Review Lesson
                </a>
            {% endif %}
            
            <a href="{{ url_for('education.education_home') }}" 
               style="display: inline-block; padding: 15px 30px; background-color: #6c757d; color: white; text-decoration: none; border-radius: 5px; margin: 5px;">
                Back to Modules
            </a>
        </div>
    </div>
</body>
</html>